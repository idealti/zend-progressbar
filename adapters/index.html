<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="zend-progressbar">  
    <link rel="canonical" href="https://docs.zendframework.com/zend-progressbar/adapters/">
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Adapters - zend-progressbar - Zend Framework Docs</title>

    <link rel="stylesheet" href="../css/styles-5cfabd53ee.css">
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">zend-progressbar</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Progress Bars</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../intro/" class="subnavigation__link">Intro</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Adapters</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../upload/" class="subnavigation__link">File Upload Handlers</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-progressbar</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-progressbar/" class="header__link header__link--github" title="Go to repository of zend-progressbar">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="laminas-announcement">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                Zend Framework transitions to the Linux Foundation. <a href="https://getlaminas.org">Learn More.</a>
            </div>
        </div>
    </div>
</div>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
    <li><a href="https://framework.zend.com/">Home</a></li>

    
        <li><a href="https://docs.zendframework.com/">Documentation</a></li>

        
            <li><a href="..">zend-progressbar</a></li>

            
                
                    
                    
                        <li>Progress Bars</li>
                    
                
            

            <li class="active">Adapters</li>
        
    
</ol>






    
    
        <h2 class="chapter__headline">Progress Bars</h2>
    

    <div>
        
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#console-adapter" class="toc__link">Console Adapter</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#jspush-adapter" class="toc__link">JsPush Adapter</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#jspull-adapter" class="toc__link">JsPull Adapter</a>
                    </li>
                
            </ul>
        </div>
    

    </div>

    <h1 id="standard-adapters">Standard Adapters</h1>
<p>zend-progressbar comes with the following three adapters:</p>
<ul>
<li><a href="#console-adapter">Zend\Progressbar\Adapter\Console</a></li>
<li><a href="#jspush-adapter">Zend\Progressbar\Adapter\JsPush</a></li>
<li><a href="#jspull-adapter">Zend\ProgressBar\Adapter\JsPull</a></li>
</ul>
<h2 id="console-adapter">Console Adapter</h2>
<p><code>Zend\ProgressBar\Adapter\Console</code> is a text-based adapter for terminals. It can
automatically detect terminal widths, but supports custom widths as well. You
can define which elements are displayed with the progressbar as well customize
the order of them. You can also define the style of the progressbar itself.</p>
<blockquote>
<h3 id="automatic-console-width-recognition">Automatic console width recognition</h3>
<p><code>shell_exec()</code> is required for this feature to work on *nix based systems. On
Windows, there is always a fixed terminal width of 80 characters, so no
recognition is required there.</p>
</blockquote>
<p>You can set the adapter options either via the <code>set*()</code> methods, or provide an
array or <code>Traversable</code> instance with options as first parameter to the
constructor. The available options are:</p>
<div class="table-responsive"><table>
<thead>
<tr>
<th>Option name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>outputStream</td>
<td><code>string|resource</code></td>
<td>A different output stream, if you don't want to stream to <code>STDOUT</code>. Can be any other stream like <code>php://stderr</code> or a path to a file.</td>
</tr>
<tr>
<td>width</td>
<td><code>int|ProgressBar::AUTO</code></td>
<td>Console width to use; <code>ProgressBar::AUTO</code> indicates the adapter should autodetect the width.</td>
</tr>
<tr>
<td>elements</td>
<td><code>null|array</code></td>
<td>Which elements to include in the display; <code>null</code> to include all, or an array with one of the <code>Console</code> constants, as detailed below.</td>
</tr>
<tr>
<td>textWidth</td>
<td><code>int</code></td>
<td>Width in characters of the <code>ELEMENT_TEXT</code> element. Default is 20.</td>
</tr>
<tr>
<td>charset</td>
<td><code>string</code></td>
<td>Charset of the <code>ELEMENT_TEXT</code> element. Default is utf-8.</td>
</tr>
<tr>
<td>barLeftChar</td>
<td><code>string</code></td>
<td>String to use on the left-hand side of the progressbar indicator.</td>
</tr>
<tr>
<td>barRightChar</td>
<td><code>string</code></td>
<td>String to use on the right-hand side of the progressbar indicator.</td>
</tr>
<tr>
<td>barIndicatorChar</td>
<td><code>string</code></td>
<td>String to use within the progressbar indicator to indicate progress; can be empty.</td>
</tr>
</tbody>
</table></div>
<p>To determine which elements to display in the progressbar, use one or more of
the following constants:</p>
<div class="table-responsive"><table>
<thead>
<tr>
<th>Option name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ELEMENT_PERCENT</code></td>
<td>The current value in percent.</td>
</tr>
<tr>
<td><code>ELEMENT_BAR</code></td>
<td>The visual bar which display the percentage.</td>
</tr>
<tr>
<td><code>ELEMENT_ETA</code></td>
<td>The automatic calculated ETA. This element is firstly displayed after five seconds, because in this time, it is not able to calculate accurate results.</td>
</tr>
<tr>
<td><code>ELEMENT_TEXT</code></td>
<td>An optional status message about the current process.</td>
</tr>
</tbody>
</table></div>
<h2 id="jspush-adapter">JsPush Adapter</h2>
<p><code>Zend\ProgressBar\Adapter\JsPush</code> is an adapter allowing you to update a
browser-based progressbar via Javascript Push. This means that no second
connection is required to gather the status about a running process, but that
the process itself sends its status directly to the browser.</p>
<p>You can set the adapter options either via the <code>set()</code> methods or provide an
array or <code>Traversable</code> instance with options as the first parameter to the
constructor. The available options are:</p>
<div class="table-responsive"><table>
<thead>
<tr>
<th>Option name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>updateMethodName</td>
<td><code>string</code></td>
<td>The JavaScript method which should be called on every update. Default value is <code>Zend\ProgressBar\Update</code>.</td>
</tr>
<tr>
<td>finishMethodName</td>
<td><code>null|string</code></td>
<td>The JavaScript method which should be called when sending the finish status. Default value is <code>NULL</code>, which means nothing is done.</td>
</tr>
</tbody>
</table></div>
<p>To use this adapter, first create a progressbar in your browser, either with
JavaScript or plain HTML. Then define the update method and optionally a finish
method in JavaScript; both should expect a JSON object as the only argument.
Then call a webpage with the long-running process in a hidden <code>iframe</code> or
<code>object</code> tag. While the process is running, the adapter will call the update
method on every update with a JSON object, containing the following parameters:</p>
<div class="table-responsive"><table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>current</td>
<td>The current absolute value detailing upload status.</td>
</tr>
<tr>
<td>max</td>
<td>The max absolute value, indicating total upload size.</td>
</tr>
<tr>
<td>percent</td>
<td>The calculated percentage complete of the upload.</td>
</tr>
<tr>
<td>timeTaken</td>
<td>The elapsed time of the upload currently.</td>
</tr>
<tr>
<td>timeRemaining</td>
<td>The expected time until the upload finishes.</td>
</tr>
<tr>
<td>text</td>
<td>The optional status message, if given.</td>
</tr>
</tbody>
</table></div>
<h3 id="basic-example-for-the-client-side">Basic example for the client-side</h3>
<p>This example illustrates a basic setup of HTML, CSS, and JavaScript for the <code>JsPush</code> adapter</p>
<pre class="codehilite"><code class="language-html">&lt;div id="zend-progressbar-container"&gt;
    &lt;div id="zend-progressbar-done"&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;iframe src="long-running-process.php" id="long-running-process"&gt;&lt;/iframe&gt;</code></pre>

<pre class="codehilite"><code class="language-css">#long-running-process {
    position: absolute;
    left: -100px;
    top: -100px;

    width: 1px;
    height: 1px;
}

#zend-progressbar-container {
    width: 100px;
    height: 30px;

    border: 1px solid #000000;
    background-color: #ffffff;
}

#zend-progressbar-done {
    width: 0;
    height: 30px;

    background-color: #000000;
}</code></pre>

<pre class="codehilite"><code class="language-javascript">function Zend\ProgressBar\Update(data)
{
    document.getElementById('zend-progressbar-done').style.width = data.percent + '%';
}</code></pre>

<p>This will create a container with a black border and a block which indicates the
current process. You should not hide the <code>iframe</code> or <code>object</code> using <code>display: none;</code>,
as some browsers (such as Safari 2) will not load the actual content then.</p>
<p>Instead of creating your custom progressbar, you may want to use one of the
available JavaScript libraries like Dojo, jQuery etc.:</p>
<ul>
<li><a href="http://dojotoolkit.org/reference-guide/dijit/ProgressBar.html">Dojo</a></li>
<li><a href="https://api.jqueryui.com/progressbar/">jQuery</a></li>
<li><a href="http://davidwalsh.name/dw-content/progress-bar.php">MooTools</a></li>
<li><a href="http://livepipe.net/control/progressbar">Prototype</a></li>
</ul>
<blockquote>
<h3 id="interval-of-updates">Interval of updates</h3>
<p>Do not send too many updates, as every update has a minimum size of 1kb. This
is a requirement for the Safari browser to actually render and execute the
function call. Internet Explorer has a similar limitation of 256 bytes.</p>
</blockquote>
<h2 id="jspull-adapter">JsPull Adapter</h2>
<p><code>Zend\ProgressBar\Adapter\JsPull</code> is the opposite of <code>JsPush</code>, as it requires
the browser to pull for new updates, instead of
pushing updates directly without intervention.</p>
<p>In general, you should use this adapter with the
<a href="../intro/#persistent-progress">persistence option of the <code>Zend\ProgressBar\ProgressBar</code></a>.
On notify, the adapter sends a JSON string to the browser, which looks exactly
like the JSON string which is sent by the <code>JsPush</code> adapter, with one difference:
it contains an additional parameter, <code>finished</code>, which is either <code>false</code> when
<code>update()</code> is called or <code>true</code>, when <code>finish()</code> is called.</p>
<p>You can set the adapter options either via the <code>set*()</code> methods, or give an
array or <code>Traversable</code> instance with options as first parameter to
the constructor. The available options are:</p>
<div class="table-responsive"><table>
<thead>
<tr>
<th>Option name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>exitAfterSend</td>
<td><code>bool</code></td>
<td>Whether or not to exit the current request after the data is sent to the browser; default is <code>true</code>.</td>
</tr>
</tbody>
</table></div>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../intro/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../upload/">
                    Next <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/zendframework/zend-progressbar/edit/master/docs/adapters.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentationâ€¦</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">zend-progressbar</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item">
                                <span class="subnavigation__headline">Progress Bars</span>
                                <ul class="subnavigation__list">
                                    
                                        
    <li class="subnavigation__list-item ">
        <a href="../intro/" class="subnavigation__link">Intro</a>
    </li>

                                    
                                        
    <li class="subnavigation__list-item subnavigation__list-item--active">
        <a href="./" class="subnavigation__link">Adapters</a>
    </li>

                                    
                                </ul>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../upload/" class="subnavigation__link">File Upload Handlers</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2019 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://tinyletter.com/mwopzend" class="support__link" title="Newsletter"><i class="fa fa-envelope"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script>
        var base_url = '..',
            siteName = 'zend-progressbar';
    </script>
    <script src="../js/scripts-8d7ae56abf.js"></script>
        <script src="../search/main.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>



</body>


</html>
